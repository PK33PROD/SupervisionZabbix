zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 846977d1dfed4968bc5f8bdb363285bc
      name: 'Templates/Operating systems'
  templates:
    - uuid: ceee792da5494a1e8d4906130d67f00b
      template: 'TEST-MODELE by snmpd'
      name: 'TEST-MODELE by snmpd'
      description: 'Modèle créer pendant la formation Superviser une infrastructure avec Zabbix.'
      groups:
        - name: 'Templates/Operating systems'
      items:
        - uuid: a61377c3849d4c97b24b788453adb01c
          name: 'IP in receives'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.4.3.0
          key: ipInReceives
          delay: 30s
          tags:
            - tag: Component
              value: Network
            - tag: Netkwork
              value: Inbound
        - uuid: cec1e9efbd6747958a98ba50adac363a
          name: 'IP out request'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.4.3.0
          key: ipOutRequest
          delay: 30s
          tags:
            - tag: Component
              value: Network
            - tag: Network
              value: OutBound
        - uuid: b9e66cf04afc47ab9341652a96d3655b
          name: 'Addresse MAC'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.2.2.1.6.2
          key: 'snmp.if.mac[#SNMPINDEX]'
          delay: 15m
          value_type: CHAR
          inventory_link: MACADDRESS_A
          tags:
            - tag: Component
              value: System
        - uuid: 08c2a4e1ebdd4d09b114e000078f9873
          name: 'Nom de la machine (SysName)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: sysName
          delay: 15m
          value_type: TEXT
          inventory_link: NAME
          triggers:
            - uuid: 618cad03124c4f668b3b170cfd3aff6e
              expression: 'change(/TEST-MODELE by snmpd/sysName)=1'
              name: 'Change of hostname'
              priority: INFO
              tags:
                - tag: scope
                  value: Notifications
            - uuid: f6d4d5f2900c4c6580ecb5e7e2d504e3
              expression: 'find(/TEST-MODELE by snmpd/sysName,,,"{$HOSTPREFIX}")=1'
              name: 'Hostname don''t contain "PK33PROD-"'
              priority: INFO
              tags:
                - tag: scope
                  value: Notifications
      discovery_rules:
        - uuid: ed109240ac534932bd6b11f26a8f8602
          name: 'Discover of interface by name'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFNAME},.1.3.6.1.2.1.31.1.1.1.1]'
          key: net.if.discovery
          delay: 5m
          item_prototypes:
            - uuid: b7f3ca9b554f46f99599bf07e9e8efab
              name: 'Status Administratif IF : {#IFNAME}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}'
              key: 'ifAdminStatus.[{#SNMPINDEX}]'
              history: 90d
              value_type: CHAR
              valuemap:
                name: 'IF-MIB:ifOperStatus'
              tags:
                - tag: Interface
                  value: '{#IFNAME}'
            - uuid: 4589753d52eb46e08f6efd6bcad45d6f
              name: 'Interface {#IFNAME} - Incomming Bits'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}'
              key: 'ifInOctets.[{#SNMPINDEX}]'
              history: 90d
              units: bps
              valuemap:
                name: 'IF-MIB:ifOperStatus'
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: Interface
                  value: '{#IFNAME}'
            - uuid: 603541bc46f84ab8bc301bafc27a8213
              name: 'Status IF : {#IFNAME}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
              key: 'ifOperStatus.[{#SNMPINDEX}]'
              history: 90d
              value_type: CHAR
              valuemap:
                name: 'IF-MIB:ifOperStatus'
              tags:
                - tag: Interface
                  value: '{#IFNAME}'
              trigger_prototypes:
                - uuid: 869e7d550a8d4021bf7c2988096dceaf
                  expression: 'last(/TEST-MODELE by snmpd/ifOperStatus.[{#SNMPINDEX}])=2'
                  name: 'Interface {#IFNAME} - Down'
                  priority: WARNING
                  tags:
                    - tag: scope
                      value: availability
            - uuid: e6b40f11fbe4425e8a227086a987cd5a
              name: 'Interface {#IFNAME} - out Bits'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}'
              key: 'ifOutOctets.[{#SNMPINDEX}]'
              history: 90d
              units: bps
              valuemap:
                name: 'IF-MIB:ifOperStatus'
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: Interface
                  value: '{#IFNAME}'
          graph_prototypes:
            - uuid: b52515f1afd04398b5efe374972348e6
              name: 'Interface {#IFNAME} - Incoming Bits'
              yaxismax: '0'
              graph_items:
                - color: 1A7C11
                  calc_fnc: ALL
                  item:
                    host: 'TEST-MODELE by snmpd'
                    key: 'ifInOctets.[{#SNMPINDEX}]'
            - uuid: e7cf3687b29042c29ee4f0aedd911190
              name: 'Interface {#IFNAME} - Out Bits'
              graph_items:
                - color: 1A7C11
                  calc_fnc: ALL
                  item:
                    host: 'TEST-MODELE by snmpd'
                    key: 'ifOutOctets.[{#SNMPINDEX}]'
      tags:
        - tag: class
          value: os
        - tag: protocol
          value: snmp
        - tag: target
          value: linux
      macros:
        - macro: '{$HOSTPREFIX}'
          value: pk33prod-
      valuemaps:
        - uuid: 30a1d6b28d284430a65cca8e05a0b174
          name: 'IF-MIB:ifOperStatus'
          mappings:
            - value: '1'
              newvalue: Up
            - value: '2'
              newvalue: Down
            - value: '3'
              newvalue: Testing
            - value: '4'
              newvalue: Unknown
            - value: '5'
              newvalue: Dormant
            - value: '6'
              newvalue: NotPresent
            - value: '7'
              newvalue: LowerLaywerDown
  graphs:
    - uuid: 8462ca0434db47d9ac2d545ba215ea10
      name: 'IP Traffic / in'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'TEST-MODELE by snmpd'
            key: ipInReceives
    - uuid: 037f605087674dd587c0bbd05152ba68
      name: 'IP Traffic / out'
      yaxismax: '0'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: '274482'
          calc_fnc: ALL
          item:
            host: 'TEST-MODELE by snmpd'
            key: ipOutRequest
